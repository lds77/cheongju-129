<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#e74c3c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ì§ì§€ì‘ê¸‰í™˜ìì´ì†¡ë‹¨ - ëª¨ë°”ì¼ ì•±</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Crect width='200' height='200' fill='%23e74c3c'/%3E%3Ctext x='100' y='130' font-size='100' text-anchor='middle' fill='white'%3EğŸš‘%3C/text%3E%3C/svg%3E">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 80px;
            color: #2c3e50;
        }

        .header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.95;
        }

        .container {
            padding: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ê¸´ê¸‰ í†µí™” ë²„íŠ¼ - ìµœìš°ì„  */
        .emergency-section {
            margin: 20px 0;
        }

        .emergency-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            font-size: 1.8rem;
            font-weight: 900;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            animation: pulse-emergency 2s infinite;
        }

        @keyframes pulse-emergency {
            0%, 100% { transform: scale(1); box-shadow: 0 10px 30px rgba(231, 76, 60, 0.5); }
            50% { transform: scale(1.02); box-shadow: 0 15px 40px rgba(231, 76, 60, 0.7); }
        }

        .emergency-btn:active {
            transform: scale(0.98);
        }

        /* ê¸°ëŠ¥ ì¹´ë“œ */
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .feature-card h2 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 25px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.3);
        }

        /* ì…ë ¥ í•„ë“œ */
        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #34495e;
            font-size: 0.95rem;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        /* ê²°ê³¼ í‘œì‹œ */
        .result-box {
            background: #f0f8ff;
            border-left: 4px solid #3498db;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 1rem;
            line-height: 1.6;
        }

        .result-box strong {
            color: #e74c3c;
            font-size: 1.3rem;
        }

        /* ìœ„ì¹˜ ì •ë³´ */
        .location-info {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        /* ë³‘ì› ëª©ë¡ */
        .hospital-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .hospital-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            color: #34495e;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .hospital-item:active {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px;
            color: #7f8c8d;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: #e74c3c;
        }

        .nav-item .icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 4px;
        }

        /* íƒ­ ì»¨í…ì¸  */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ì„¤ì¹˜ ë°°ë„ˆ */
        .install-banner {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .install-banner.hidden {
            display: none;
        }

        .install-text {
            flex: 1;
        }

        .install-text h3 {
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .install-text p {
            font-size: 0.85rem;
            opacity: 0.95;
        }

        .install-btn-small {
            background: white;
            color: #27ae60;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
        }

        /* ë¡œë”© */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #3498db;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ì•Œë¦¼ ë©”ì‹œì§€ */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #2c3e50;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸš‘ ì§ì§€ì‘ê¸‰í™˜ìì´ì†¡ë‹¨</h1>
        <p>ì¶©ë¶ 11ê°œ ì‹œêµ° 24ì‹œê°„ ì‘ê¸‰ì´ì†¡</p>
    </div>

    <!-- ì„¤ì¹˜ ë°°ë„ˆ -->
    <div id="installBanner" class="install-banner hidden">
        <div class="install-text">
            <h3>ì•±ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°</h3>
            <p>í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì—¬ ë¹ ë¥´ê²Œ ì‚¬ìš©í•˜ì„¸ìš”</p>
        </div>
        <button class="install-btn-small" onclick="installApp()">ì„¤ì¹˜</button>
    </div>

    <div class="container">
        <!-- í™ˆ íƒ­ -->
        <div id="homeTab" class="tab-content active">
            <!-- ê¸´ê¸‰ í†µí™” ë²„íŠ¼ -->
            <div class="emergency-section">
                <a href="tel:010-8841-4114" class="emergency-btn" style="text-decoration: none;">
                    <span>ğŸ“</span>
                    <span>ê¸´ê¸‰ í†µí™”<br><small style="font-size: 1.2rem;">010-8841-4114</small></span>
                </a>
            </div>

            <!-- ìœ„ì¹˜ ì „ì†¡ -->
            <div class="feature-card">
                <h2>ğŸ“ ë‚´ ìœ„ì¹˜ ì „ì†¡</h2>
                <p style="color: #7f8c8d; margin-bottom: 15px;">í˜„ì¬ ìœ„ì¹˜ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì™€ SMSë¡œ ì „ì†¡í•©ë‹ˆë‹¤</p>
                <button class="btn btn-success" onclick="sendLocation()">ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° & ë¬¸ì ì „ì†¡</button>
                <div id="locationResult" class="location-info" style="display: none;"></div>
            </div>

            <!-- ë¹ ë¥¸ ë©”ë‰´ -->
            <div class="feature-card">
                <h2>âš¡ ë¹ ë¥¸ ë©”ë‰´</h2>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <button class="btn" onclick="switchTab('calculator')">ğŸ’° ìš”ê¸ˆê³„ì‚°</button>
                    <button class="btn" onclick="switchTab('booking')">ğŸ“… ì˜ˆì•½í•˜ê¸°</button>
                    <button class="btn" onclick="switchTab('hospitals')">ğŸ¥ ë³‘ì›ëª©ë¡</button>
                    <button class="btn btn-secondary" onclick="switchTab('info')">â„¹ï¸ ì„œë¹„ìŠ¤ ì •ë³´</button>
                </div>
            </div>

            <!-- ì•± ì„¤ì¹˜ ì•ˆë‚´ -->
            <div class="feature-card" style="background: linear-gradient(135deg, #27ae60, #229954); color: white;">
                <h2 style="color: white;">ğŸ“² ì•±ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°</h2>
                <p style="color: rgba(255,255,255,0.95); margin-bottom: 15px; line-height: 1.6;">
                    í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ë©´ ì•±ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                </p>
                <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px; margin-bottom: 10px; backdrop-filter: blur(10px);">
                    <p style="font-weight: 700; margin-bottom: 8px;">ğŸ“± iPhone (Safari)</p>
                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.95); line-height: 1.5;">
                        í•˜ë‹¨ ê³µìœ  ë²„íŠ¼ (â–¡â†‘) â†’ "í™ˆ í™”ë©´ì— ì¶”ê°€" ì„ íƒ
                    </p>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px; backdrop-filter: blur(10px);">
                    <p style="font-weight: 700; margin-bottom: 8px;">ğŸ¤– Android (Chrome)</p>
                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.95); line-height: 1.5;">
                        ë©”ë‰´(â‹®) â†’ "ì•± ì„¤ì¹˜" ë˜ëŠ” "í™ˆ í™”ë©´ì— ì¶”ê°€" ì„ íƒ
                    </p>
                </div>
            </div>
        </div>

        <!-- ìš”ê¸ˆ ê³„ì‚°ê¸° íƒ­ -->
        <div id="calculatorTab" class="tab-content">
            <div class="feature-card">
                <h2>ğŸ’° ìš”ê¸ˆ ê³„ì‚°ê¸°</h2>
                <div class="input-group">
                    <label>ì¶œë°œì§€</label>
                    <input type="text" id="departure" placeholder="ì˜ˆ: ì²­ì£¼ì‹œ ì„œì›êµ¬">
                </div>
                <div class="input-group">
                    <label>ë„ì°©ì§€</label>
                    <input type="text" id="destination" placeholder="ì˜ˆ: ì¶©ì£¼ì‹œ í˜¸ì•”ë™">
                </div>
                <div class="input-group">
                    <label>ê±°ë¦¬ (km)</label>
                    <input type="number" id="distance" placeholder="ì˜ˆ: 50" min="1">
                </div>
                <div class="input-group">
                    <label>í™˜ì ìƒíƒœ</label>
                    <select id="patientCondition">
                        <option value="normal">ì¼ë°˜ (ê±°ë™ ê°€ëŠ¥)</option>
                        <option value="bed">ì¹¨ìƒ í•„ìš”</option>
                        <option value="emergency">ì‘ê¸‰ ìƒí™©</option>
                    </select>
                </div>
                <button class="btn" onclick="calculateFee()">ìš”ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
                <div id="feeResult" class="result-box" style="display: none;"></div>
            </div>
        </div>

        <!-- ì˜ˆì•½ íƒ­ -->
        <div id="bookingTab" class="tab-content">
            <div class="feature-card">
                <h2>ğŸ“… ì´ì†¡ ì˜ˆì•½</h2>
                <div class="input-group">
                    <label>ì˜ˆì•½ì ì„±ëª…</label>
                    <input type="text" id="bookingName" placeholder="í™ê¸¸ë™">
                </div>
                <div class="input-group">
                    <label>ì—°ë½ì²˜</label>
                    <input type="tel" id="bookingPhone" placeholder="010-0000-0000">
                </div>
                <div class="input-group">
                    <label>ì´ì†¡ ì¼ì‹œ</label>
                    <input type="datetime-local" id="bookingDate">
                </div>
                <div class="input-group">
                    <label>ì¶œë°œì§€</label>
                    <input type="text" id="bookingDeparture" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥">
                </div>
                <div class="input-group">
                    <label>ë„ì°©ì§€</label>
                    <input type="text" id="bookingDestination" placeholder="ë³‘ì›ëª… ë˜ëŠ” ì£¼ì†Œ">
                </div>
                <div class="input-group">
                    <label>í™˜ì ìƒíƒœ ë° íŠ¹ì´ì‚¬í•­</label>
                    <textarea id="bookingNotes" rows="3" placeholder="í™˜ìì˜ ìƒíƒœ, í•„ìš”í•œ ì˜ë£Œì¥ë¹„, ê¸°íƒ€ ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>
                <button class="btn" onclick="submitBooking()">ì˜ˆì•½ ì‹ ì²­í•˜ê¸°</button>
            </div>
        </div>

        <!-- ë³‘ì› ëª©ë¡ íƒ­ -->
        <div id="hospitalsTab" class="tab-content">
            <div class="feature-card">
                <h2>ğŸ¥ ì¶©ë¶ 11ê°œ ì‹œêµ°</h2>
                <p style="color: #7f8c8d; margin-bottom: 10px;">ëª¨ë“  ì§€ì—­ ì´ì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤</p>
                <div class="hospital-list">
                    <div class="hospital-item">ì²­ì£¼ì‹œ</div>
                    <div class="hospital-item">ì¶©ì£¼ì‹œ</div>
                    <div class="hospital-item">ì œì²œì‹œ</div>
                    <div class="hospital-item">ìŒì„±êµ°</div>
                    <div class="hospital-item">ì§„ì²œêµ°</div>
                    <div class="hospital-item">ê´´ì‚°êµ°</div>
                    <div class="hospital-item">ì¦í‰êµ°</div>
                    <div class="hospital-item">ì˜ë™êµ°</div>
                    <div class="hospital-item">ì˜¥ì²œêµ°</div>
                    <div class="hospital-item">ë³´ì€êµ°</div>
                    <div class="hospital-item">ë‹¨ì–‘êµ°</div>
                </div>
            </div>

            <div class="feature-card">
                <h2>ğŸ¥ ì£¼ìš” ì—°ê³„ ë³‘ì›</h2>
                <div style="line-height: 1.8;">
                    <p><strong>ì²­ì£¼ê¶Œì—­</strong><br>ì¶©ë¶ëŒ€ë³‘ì›, ì²­ì£¼ì„±ëª¨ë³‘ì›, ê±´êµ­ëŒ€ì¶©ì£¼ë³‘ì›</p>
                    <p style="margin-top: 10px;"><strong>ì¶©ì£¼ê¶Œì—­</strong><br>ì¶©ì£¼ì˜ë£Œì›, ì„¸ëª…ëŒ€ì¶©ì£¼í•œë°©ë³‘ì›</p>
                    <p style="margin-top: 10px;"><strong>ì œì²œê¶Œì—­</strong><br>ì œì²œì„±ëª¨ë³‘ì›, ì„¸ëª…ëŒ€ì œì²œí•œë°©ë³‘ì›</p>
                    <p style="margin-top: 10px;"><strong>ê¸°íƒ€</strong><br>ì„œìš¸, ëŒ€ì „, ë¶€ì‚° ë“± ì „êµ­ ì´ì†¡ ê°€ëŠ¥</p>
                </div>
            </div>
        </div>

        <!-- ì •ë³´ íƒ­ -->
        <div id="infoTab" class="tab-content">
            <div class="feature-card">
                <h2>â„¹ï¸ ì„œë¹„ìŠ¤ ì•ˆë‚´</h2>
                <div style="line-height: 1.8;">
                    <p><strong>ğŸ›ï¸ ì¹¨ìƒêµ¬ê¸‰ì°¨ ì™„ë¹„</strong><br>ì „ë™ ìŠ¤íŠ¸ë ˆì²˜, ì‚°ì†Œê³µê¸‰ì¥ì¹˜, ì˜ë£Œì¥ë¹„</p>
                    <p style="margin-top: 15px;"><strong>ğŸ‘¨â€âš•ï¸ ì‘ê¸‰êµ¬ì¡°ì‚¬ ë™í–‰</strong><br>1ê¸‰ ìê²©ìê°€ ì´ì†¡ ì¤‘ í™˜ì ì¼€ì–´</p>
                    <p style="margin-top: 15px;"><strong>â° 24ì‹œê°„ 365ì¼</strong><br>ì–¸ì œë“  ì˜ˆì•½ ë° ì‘ê¸‰ ì¶œë™ ê°€ëŠ¥</p>
                    <p style="margin-top: 15px;"><strong>ğŸ’³ ë³´í—˜ ì ìš©</strong><br>ì˜ì‚¬ ì†Œê²¬ì„œ ì‹œ ê±´ê°•ë³´í—˜ ì ìš©</p>
                    <p style="margin-top: 15px;"><strong>ğŸ“ ì „êµ­ ì–´ë””ë“ </strong><br>ì¶©ë¶ ì „ì—­ ë° ì „êµ­ ì¥ê±°ë¦¬ ì´ì†¡</p>
                </div>
            </div>

            <div class="feature-card">
                <h2>ğŸ“ ì—°ë½ì²˜</h2>
                <div style="text-align: center;">
                    <p style="font-size: 2rem; font-weight: 900; color: #e74c3c; margin: 20px 0;">010-8841-4114</p>
                    <a href="tel:010-8841-4114" class="btn" style="text-decoration: none; display: block; margin-bottom: 12px;">ì§€ê¸ˆ ë°”ë¡œ ì „í™”í•˜ê¸°</a>
                    <a href="sms:010-8841-4114" class="btn btn-success" style="text-decoration: none; display: block; margin-bottom: 12px;">ë¬¸ì ë³´ë‚´ê¸°</a>
                    <a href="/" class="btn btn-secondary" style="text-decoration: none; display: block;">ì›¹ì‚¬ì´íŠ¸ ë³´ê¸°</a>
                </div>
            </div>
        </div>
    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')">
            <span class="icon">ğŸ </span>
            <span>í™ˆ</span>
        </div>
        <div class="nav-item" onclick="switchTab('calculator')">
            <span class="icon">ğŸ’°</span>
            <span>ìš”ê¸ˆ</span>
        </div>
        <div class="nav-item" onclick="switchTab('booking')">
            <span class="icon">ğŸ“…</span>
            <span>ì˜ˆì•½</span>
        </div>
        <div class="nav-item" onclick="switchTab('hospitals')">
            <span class="icon">ğŸ¥</span>
            <span>ë³‘ì›</span>
        </div>
        <div class="nav-item" onclick="switchTab('info')">
            <span class="icon">â„¹ï¸</span>
            <span>ì •ë³´</span>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div id="toast" class="toast"></div>

    <script>
        // Service Worker ë“±ë¡
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('SW ë“±ë¡ ì„±ê³µ'))
                .catch(err => console.log('SW ë“±ë¡ ì‹¤íŒ¨'));
        }

        // PWA ì„¤ì¹˜
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBanner').classList.remove('hidden');
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showToast('ì•± ì„¤ì¹˜ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!');
                    }
                    document.getElementById('installBanner').classList.add('hidden');
                    deferredPrompt = null;
                });
            } else {
                showToast('ì´ë¯¸ ì„¤ì¹˜ë˜ì—ˆê±°ë‚˜ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tabName + 'Tab').classList.add('active');

            // ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™”
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        // ìœ„ì¹˜ ì „ì†¡
        function sendLocation() {
            if ('geolocation' in navigator) {
                showToast('ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...');

                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const mapUrl = `https://maps.google.com/?q=${lat},${lng}`;

                    const message = `[ì‘ê¸‰í™˜ìì´ì†¡ ìš”ì²­]\ní˜„ì¬ ìœ„ì¹˜:\nìœ„ë„: ${lat}\nê²½ë„: ${lng}\nì§€ë„: ${mapUrl}`;
                    const smsUrl = `sms:010-8841-4114?body=${encodeURIComponent(message)}`;

                    document.getElementById('locationResult').innerHTML = `
                        <strong>ìœ„ì¹˜ í™•ì¸ ì™„ë£Œ!</strong><br>
                        ìœ„ë„: ${lat.toFixed(6)}<br>
                        ê²½ë„: ${lng.toFixed(6)}<br>
                        <a href="${mapUrl}" target="_blank" style="color: #3498db;">êµ¬ê¸€ ì§€ë„ì—ì„œ ë³´ê¸°</a>
                    `;
                    document.getElementById('locationResult').style.display = 'block';

                    // SMS ì•± ì—´ê¸°
                    window.location.href = smsUrl;
                    showToast('ë¬¸ì ì•±ì´ ì—´ë¦½ë‹ˆë‹¤. ì „ì†¡ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”!');
                }, (error) => {
                    showToast('ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìœ„ì¹˜ ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”.');
                });
            } else {
                showToast('ì´ ê¸°ê¸°ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ìš”ê¸ˆ ê³„ì‚°
        function calculateFee() {
            const distance = parseFloat(document.getElementById('distance').value);
            const condition = document.getElementById('patientCondition').value;

            if (!distance || distance <= 0) {
                showToast('ê±°ë¦¬ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            let baseFee = 75000; // ê¸°ë³¸ ìš”ê¸ˆ (10km ì´ë‚´)
            let totalFee = baseFee;

            if (distance > 10) {
                totalFee += (distance - 10) * 1300; // 10km ì´ˆê³¼ ì‹œ kmë‹¹ 1,300ì›
            }

            // í™˜ì ìƒíƒœì— ë”°ë¥¸ ì¶”ê°€ ìš”ê¸ˆ
            if (condition === 'emergency') {
                totalFee += 30000;
            } else if (condition === 'bed') {
                totalFee += 15000;
            }

            // ë³´í—˜ ì ìš© ì‹œ í™˜ì ë¶€ë‹´ê¸ˆ (30% ê°€ì •)
            const insuranceFee = Math.round(totalFee * 0.3);

            document.getElementById('feeResult').innerHTML = `
                <strong>ì˜ˆìƒ ìš”ê¸ˆ</strong><br><br>
                ê¸°ë³¸ ê±°ë¦¬: ${Math.min(distance, 10)}km<br>
                ì¶”ê°€ ê±°ë¦¬: ${Math.max(0, distance - 10)}km<br>
                í™˜ì ìƒíƒœ: ${condition === 'emergency' ? 'ì‘ê¸‰' : condition === 'bed' ? 'ì¹¨ìƒ' : 'ì¼ë°˜'}<br>
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                <strong style="font-size: 1.5rem;">ì´ ìš”ê¸ˆ: ${totalFee.toLocaleString()}ì›</strong><br>
                <span style="color: #27ae60;">ë³´í—˜ ì ìš© ì‹œ: ${insuranceFee.toLocaleString()}ì›</span><br>
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                <small style="color: #7f8c8d;">* ì‹¤ì œ ìš”ê¸ˆì€ í™˜ì ìƒíƒœì™€ ì´ì†¡ ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì •í™•í•œ ìš”ê¸ˆì€ ì „í™” ìƒë‹´ ì‹œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</small>
            `;
            document.getElementById('feeResult').style.display = 'block';
        }

        // ì˜ˆì•½ ì‹ ì²­
        function submitBooking() {
            const name = document.getElementById('bookingName').value;
            const phone = document.getElementById('bookingPhone').value;
            const date = document.getElementById('bookingDate').value;
            const departure = document.getElementById('bookingDeparture').value;
            const destination = document.getElementById('bookingDestination').value;
            const notes = document.getElementById('bookingNotes').value;

            if (!name || !phone || !date || !departure || !destination) {
                showToast('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const dateObj = new Date(date);
            const formattedDate = dateObj.toLocaleString('ko-KR');

            const message = `[í™˜ìì´ì†¡ ì˜ˆì•½ ì‹ ì²­]\n\nì´ë¦„: ${name}\nì—°ë½ì²˜: ${phone}\nì¼ì‹œ: ${formattedDate}\nì¶œë°œ: ${departure}\në„ì°©: ${destination}\níŠ¹ì´ì‚¬í•­: ${notes || 'ì—†ìŒ'}`;

            // SMSë¡œ ì „ì†¡
            const smsUrl = `sms:010-8841-4114?body=${encodeURIComponent(message)}`;
            window.location.href = smsUrl;

            showToast('ë¬¸ì ì•±ì´ ì—´ë¦½ë‹ˆë‹¤. ì˜ˆì•½ ë‚´ìš©ì„ í™•ì¸ í›„ ì „ì†¡í•˜ì„¸ìš”!');
        }

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ê¸´ê¸‰ í†µí™” URL íŒŒë¼ë¯¸í„° í™•ì¸
        if (window.location.hash === '#emergency') {
            window.location.href = 'tel:010-8841-4114';
        }
    </script>
</body>
</html>
